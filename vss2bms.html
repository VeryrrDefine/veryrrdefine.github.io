<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VSS - VeryrrDefine的主页</title>
    <link href="./style.css" rel="stylesheet" />
</head>

<body>
    <h1>VSS to BMS converter</h1>
    <p>输入格式: 0,1,+2,1,+2,1,+2,1,-2,-2,-2</p>
    <form>
        <label>输入VSS表达式: <input id="vsscont" value="0" /></label>
        <p>结果: <span id="bms"></span></p>
    </form>
    <script>
        vsscont.onchange = function (e) {
            let currentvalue = e.target.value;
            currentvalue = currentvalue.replace(/\s/g, "");
            let seq = currentvalue.split(",");
            let res = [];
            var mainoffset = 0;
            for (let i = 0; i < seq.length; i++) {
                let cur = seq[i]
                console.log(cur)
                if (cur.startsWith("+")) {
                    console.log("add", mainoffset)
                    i++;
                    res.push(`(${+cur + mainoffset},${seq[i]})`)
                    mainoffset += parseInt(cur.substring(1));
                } else if (cur.startsWith("-")) {
                    console.log("sub", mainoffset)
                    mainoffset -= parseInt(cur.substring(1));

                } else {
                    console.log("ok")
                    res.push(`(${+cur + mainoffset},${cur})`)
                }
            }
            bms.innerText = res.join("")
        }
    </script>
</body>

</html>